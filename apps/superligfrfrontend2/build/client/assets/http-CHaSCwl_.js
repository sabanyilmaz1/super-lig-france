var l=Object.defineProperty;var f=(r,e,t)=>e in r?l(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var c=(r,e,t)=>f(r,typeof e!="symbol"?e+"":e,t);async function d(r,e={}){const t=m();if(!t)throw new Error("No valid authentication token found");return fetch(r,{...e,headers:{...e.headers,Authorization:`Bearer ${t}`}})}const y=r=>{const e={token:r,expiresAt:new Date().getTime()+6048e5};localStorage.setItem("token",JSON.stringify(e))};function m(){const r=localStorage.getItem("token");if(!r)return null;try{const e=JSON.parse(r);return new Date().getTime()>e.expiresAt?(localStorage.removeItem("token"),null):e.token}catch{return localStorage.removeItem("token"),null}}const g="https://super-lig-france.fr/api",a=class a{async request(e,t){const{params:n,...i}=t;let o=`${a.baseUrl}${e}`;if(n){const u=new URLSearchParams(n);o+=`?${u.toString()}`}const s=await d(o,{...i,headers:{"Content-Type":"application/json",...t.headers}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()}async requestWithoutAuth(e,t={}){const{params:n,...i}=t;let o=`${a.baseUrl}${e}`;if(n){const u=new URLSearchParams(n);o+=`?${u.toString()}`}const s=await fetch(o,{...i,headers:{"Content-Type":"application/json",...t.headers}});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()}async get(e,t={}){return this.request(e,{...t,method:"GET"})}async post(e,t,n={}){return this.request(e,{...n,method:"POST",body:t?JSON.stringify(t):void 0})}async put(e,t,n={}){return this.request(e,{...n,method:"PUT",body:t?JSON.stringify(t):void 0})}async postWithoutAuth(e,t,n={}){return this.requestWithoutAuth(e,{...n,method:"POST",body:t?JSON.stringify(t):void 0})}};c(a,"baseUrl",g);let h=a;export{h as H,m as g,y as s};
